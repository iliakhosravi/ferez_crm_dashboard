import { FC, useState } from "react";
import "../styles/transactions.css";
import { convertToShamsi } from "../utils";

import { KeyboardArrowLeft, ReceiptLongOutlined } from "@mui/icons-material";


const TransactionsPage: FC = () => {
  const [activeTab, setActiveTab] = useState(0);
  const [expandCard, setExpandCard] = useState(100000000);
  const TransactionsData = [
    {
      id: 0,
      title: "خرید جایگاه",
      description: "توضیحات خرید جایگاه",
      cratedAt: "2024-08-10T06:15:21.000000Z",
      paymentReciptent: "4500445522588888",
      payAmount: "6000000",
      status: 0,
    },
    {
      id: 1,
      title: "1خرید جایگاه",
      description: "توضیحات خرید جایگاه",
      cratedAt: "2024-08-10T06:15:21.000000Z",
      paymentReciptent: "4500445522588888",
      payAmount: "6000000",
      status: 1,
    },
    {
      id: 2,
      title: "2خرید جایگاه",
      description: "توضیحات خرید جایگاه",
      cratedAt: "2024-08-10T06:15:21.000000Z",
      paymentReciptent: "4500445522588888",
      payAmount: "6000000",
      status: 0,
    },
    {
      id: 3,
      title: "3خرید جایگاه",
      description: "توضیحات خرید جایگاه",
      cratedAt: "2024-08-10T06:15:21.000000Z",
      paymentReciptent: "4500445522588888",
      payAmount: "6000000",
      status: 1,
    },
    {
      id: 4,
      title: "4خرید جایگاه",
      description: "توضیحات خرید جایگاه",
      cratedAt: "2024-08-10T06:15:21.000000Z",
      paymentReciptent: "4500445522588888",
      payAmount: "6000000",
      status: 0,
    },
    {
      id: 5,
      title: "5خرید جایگاه",
      description: "توضیحات خرید جایگاه",
      cratedAt: "2024-08-10T06:15:21.000000Z",
      paymentReciptent: "4500445522588888",
      payAmount: "6000000",
      status: 1,
    },
  ];

  const filteredTransactions = TransactionsData.filter(
    (transaction) =>
      activeTab === 0 ||
      (activeTab === 1 && transaction.status === 0) ||
      (activeTab === 2 && transaction.status === 1)
  );

 const handelExpandCard=(id:number ) => {
    if(expandCard === id){
      setExpandCard(100000000);
    }else{
      setExpandCard(id);
    }
  }

  return (
    <section>
       {/* ******** Header **************************    */}
    <div style={{
        width:"100%",
        height: "10vh",
        display:"flex",
        justifyContent:"space-between",
        alignItems:"center",
        fontWeight:"bold",
        color:"#1677FF",
        borderBottom: "solid 1px #d7ebfa"
      }}>
        <div style={{display:"flex", gap:"8px"}}>
          <ReceiptLongOutlined/>
        لیست تراکنش ها

        </div>
    
                </div>

      {/* ************** TransAction Tab Bar ************************************** */}
      <div className="transaction-TabBar">
        <div
          onClick={() => setActiveTab(0)}
          className={
            activeTab === 0
              ? "tansaction-Tabbar-card-active"
              : "tansaction-Tabbar-card-nonactive"
          }
        >
          <svg
            className="transaction-all-icon"
            viewBox="0 0 40 40"
            xmlns="http://www.w3.org/2000/svg"
            _ngcontent-sul-c185=""
            aria-hidden="true"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M8.10323 31.1183C8.03867 30.6559 8.01696 30.1889 8.03841 29.7226V17.0888C7.98671 15.2653 8.05472 13.4405 8.24203 11.6252C8.33199 10.3067 8.75002 8.83223 9.69321 7.86618C10.704 6.96477 12.1565 6.65162 13.5361 6.56565C15.4356 6.38664 17.345 6.32165 19.253 6.37105H22.4795C24.3876 6.32197 26.2969 6.38697 28.1964 6.56565C28.4984 6.5858 28.7967 6.62739 29.0893 6.68948C28.8301 6.10436 28.4737 5.56207 28.0307 5.08729C27.052 4.18252 25.7939 3.63878 24.4644 3.54593C22.6317 3.36555 20.7896 3.29994 18.9488 3.34949H15.8359C13.995 3.29961 12.1529 3.36522 10.3202 3.54593C8.98922 3.63272 7.72918 4.1773 6.75395 5.08729C5.84397 6.06252 5.2994 7.32253 5.21261 8.65355C5.0319 10.4862 4.96628 12.3283 5.01616 14.1692V26.9231C4.99261 27.4587 5.02298 27.9954 5.10682 28.5249C5.32076 29.3875 5.86045 30.1338 6.6127 30.6071C7.06726 30.8931 7.57809 31.0661 8.10323 31.1183Z"
              _ngcontent-sul-c185=""
            ></path>
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M35.6167 13.9429C35.5299 12.6119 34.9853 11.3518 34.0754 10.3766C33.0967 9.47184 31.8386 8.9281 30.5091 8.83526C28.6764 8.65487 26.8343 8.58926 24.9935 8.63881H21.8805C20.0397 8.58893 18.1975 8.65455 16.3649 8.83526C15.0339 8.92205 13.7739 9.46663 12.7986 10.3766C11.8886 11.3518 11.3441 12.6119 11.2573 13.9429C11.0766 15.7755 11.011 17.6177 11.0608 19.4585V32.2124C11.0373 32.7481 11.0677 33.2847 11.1515 33.8142C11.3654 34.6769 11.9051 35.4231 12.6574 35.8965C13.4096 36.3698 14.316 36.5334 15.1862 36.3529C15.7006 36.2067 16.1973 36.0039 16.6671 35.7485L16.788 35.688C17.06 35.5671 17.1356 35.5369 17.196 35.5067C17.5279 35.3858 17.8917 35.3858 18.2236 35.5067C18.2991 35.5369 18.3747 35.5671 18.6316 35.688L20.8983 36.7609L21.0494 36.8365C21.7753 37.2738 22.5924 37.5376 23.437 37.6072C24.2807 37.5332 25.0968 37.2698 25.8246 36.8365L25.9757 36.7609L28.2273 35.688C28.4993 35.5671 28.5748 35.5369 28.6353 35.5067C28.9723 35.3858 29.3409 35.3858 29.678 35.5067C29.7384 35.5369 29.8139 35.5671 30.0708 35.688L30.1917 35.7485C30.6666 36.0044 31.1683 36.2072 31.6878 36.3529C32.556 36.5314 33.4596 36.3667 34.209 35.8934C34.9584 35.42 35.4954 34.6749 35.7074 33.8142C35.8051 33.2863 35.8406 32.7487 35.8132 32.2124V19.4585C35.863 17.6177 35.7974 15.7755 35.6167 13.9429ZM23.7392 26.4097H18.3294C18.0007 26.4097 17.6855 26.2792 17.4532 26.0468C17.2208 25.8144 17.0902 25.4992 17.0902 25.1706C17.0902 24.8419 17.2208 24.5268 17.4532 24.2944C17.6855 24.062 18.0007 23.9314 18.3294 23.9314H23.7392C24.0679 23.9314 24.383 24.062 24.6154 24.2944C24.8478 24.5268 24.9783 24.8419 24.9783 25.1706C24.9783 25.4992 24.8478 25.8144 24.6154 26.0468C24.383 26.2792 24.0679 26.4097 23.7392 26.4097ZM28.2726 20.199H18.3294C17.9987 20.199 17.6816 20.0676 17.4478 19.8338C17.214 19.6 17.0827 19.2829 17.0827 18.9523C17.0827 18.6216 17.214 18.3045 17.4478 18.0707C17.6816 17.8369 17.9987 17.7056 18.3294 17.7056H28.2726C28.6033 17.7056 28.9203 17.8369 29.1541 18.0707C29.3879 18.3045 29.5193 18.6216 29.5193 18.9523C29.5193 19.2829 29.3879 19.6 29.1541 19.8338C28.9203 20.0676 28.6033 20.199 28.2726 20.199Z"
              _ngcontent-sul-c185=""
            ></path>
          </svg>
          <p>همه</p>
          <p>26 صورتحساب</p>
        </div>

        <div
          onClick={() => setActiveTab(1)}
          className={
            activeTab === 1
              ? "tansaction-Tabbar-card-active"
              : "tansaction-Tabbar-card-nonactive"
          }
        >
          <svg
            className="transaction-all-icon"
            viewBox="0 0 40 40"
            xmlns="http://www.w3.org/2000/svg"
            _ngcontent-sul-c185=""
            aria-hidden="true"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M29.2177 5.17769C30.1746 6.20319 30.7473 7.52815 30.8385 8.92777C31.0286 10.8549 31.0976 12.792 31.0451 14.7277V20.0256C31.0451 20.6076 30.5267 21.05 29.9447 21.0441C29.9168 21.0438 29.8889 21.0436 29.8609 21.0436C25.4539 21.0436 21.9158 24.5817 21.9158 28.9887C21.9158 29.7514 22.0248 30.4911 22.2284 31.1924C22.3703 31.6813 22.1702 32.2217 21.7105 32.4407L20.7006 32.9219L20.5417 33.0014C19.7997 33.4432 18.9703 33.717 18.1117 33.8042C18.0581 33.8096 18.004 33.8097 17.9503 33.8046C17.0909 33.7216 16.2605 33.4473 15.5204 33.0014L15.3615 32.9219L12.978 31.7937C12.7081 31.6667 12.6285 31.6349 12.5491 31.6031L12.5489 31.6031C12.2 31.4759 11.8174 31.4759 11.4684 31.6031C11.4317 31.6214 11.3897 31.6398 11.3056 31.6765C11.2441 31.7034 11.1602 31.74 11.0394 31.7937L10.9122 31.8573C10.4182 32.1259 9.89595 32.3391 9.35503 32.4929C8.43991 32.6826 7.48684 32.5106 6.69582 32.0129C5.9048 31.5152 5.33729 30.7304 5.11233 29.8234C5.02417 29.2665 4.99223 28.7022 5.01699 28.139V14.7277C4.96454 12.792 5.03354 10.8549 5.22357 8.92777C5.31484 7.52815 5.88747 6.20319 6.84435 5.17769C7.86985 4.22081 9.19483 3.64816 10.5945 3.55689C12.5215 3.36687 14.4586 3.29787 16.3944 3.35032H19.6677C21.6035 3.29822 23.5405 3.36721 25.4676 3.55689C26.8657 3.65452 28.1887 4.22629 29.2177 5.17769ZM12.6602 22.0372H18.3489C18.6944 22.0372 19.0258 21.8999 19.2702 21.6555C19.5145 21.4112 19.6518 21.0797 19.6518 20.7342C19.6518 20.3886 19.5145 20.0572 19.2702 19.8128C19.0258 19.5685 18.6944 19.4312 18.3489 19.4312H12.6602C12.3146 19.4312 11.9832 19.5685 11.7388 19.8128C11.4944 20.0572 11.3572 20.3886 11.3572 20.7342C11.3572 21.0797 11.4944 21.4112 11.7388 21.6555C11.9832 21.8999 12.3146 22.0372 12.6602 22.0372ZM12.6602 15.5063H23.1159C23.4636 15.5063 23.797 15.3682 24.0429 15.1223C24.2887 14.8765 24.4268 14.543 24.4268 14.1954C24.4268 13.8477 24.2887 13.5142 24.0429 13.2684C23.797 13.0225 23.4636 12.8844 23.1159 12.8844H12.6602C12.3125 12.8844 11.979 13.0225 11.7332 13.2684C11.4873 13.5142 11.3492 13.8477 11.3492 14.1954C11.3492 14.543 11.4873 14.8765 11.7332 15.1223C11.979 15.3682 12.3125 15.5063 12.6602 15.5063Z"
              _ngcontent-sul-c185=""
            ></path>
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M24.0686 29.1474C24.0686 25.8464 26.7187 23.1963 30.0197 23.1963C33.3207 23.1963 35.9708 25.8929 35.9708 29.1474C35.9708 32.4484 33.3207 35.0985 30.0197 35.0985C26.7187 35.0985 24.0686 32.4484 24.0686 29.1474ZM30.9023 29.0476C30.9023 29.5701 30.4739 30.0066 29.9467 30.0066C29.4195 30.0066 28.9801 29.5701 28.9801 29.0476V27.1703C28.9801 26.6467 29.4195 26.2232 29.9467 26.2232C30.4739 26.2232 30.9023 26.6467 30.9023 27.1703V29.0476ZM29.9467 32.6806C29.4195 32.6806 28.9802 32.2441 28.9802 31.7227C28.9802 31.1991 29.4195 30.7636 29.9467 30.7636C30.474 30.7636 30.9023 31.1893 30.9023 31.7107C30.9023 32.2441 30.474 32.6806 29.9467 32.6806Z"
              fill="#FFBA1F"
              _ngcontent-sul-c185=""
            ></path>
          </svg>
          <p>پرداخت نشده</p>
          <p>26 صورتحساب</p>
        </div>

        <div
          onClick={() => setActiveTab(2)}
          className={
            activeTab === 2
              ? "tansaction-Tabbar-card-active"
              : "tansaction-Tabbar-card-nonactive"
          }
        >
          <svg
            className="transaction-all-icon"
            viewBox="0 0 40 40"
            xmlns="http://www.w3.org/2000/svg"
            _ngcontent-sul-c185=""
            aria-hidden="true"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M29.2177 5.17769C30.1746 6.20319 30.7473 7.52815 30.8385 8.92777C31.0286 10.8549 31.0976 12.792 31.0451 14.7277V20.0256C31.0451 20.6076 30.5267 21.05 29.9447 21.0441C29.9168 21.0438 29.8889 21.0436 29.8609 21.0436C25.4539 21.0436 21.9158 24.5817 21.9158 28.9887C21.9158 29.7514 22.0248 30.4911 22.2284 31.1924C22.3703 31.6813 22.1702 32.2217 21.7105 32.4407L20.7006 32.9219L20.5417 33.0014C19.7997 33.4432 18.9703 33.717 18.1117 33.8042C18.0581 33.8096 18.004 33.8097 17.9503 33.8046C17.0909 33.7216 16.2605 33.4473 15.5204 33.0014L15.3615 32.9219L12.978 31.7937C12.7081 31.6667 12.6285 31.6349 12.5491 31.6031L12.5489 31.6031C12.2 31.4759 11.8174 31.4759 11.4684 31.6031C11.4317 31.6214 11.3897 31.6398 11.3056 31.6765C11.2441 31.7034 11.1602 31.74 11.0394 31.7937L10.9122 31.8573C10.4182 32.1259 9.89595 32.3391 9.35503 32.4929C8.43991 32.6826 7.48684 32.5106 6.69582 32.0129C5.9048 31.5152 5.33729 30.7304 5.11233 29.8234C5.02417 29.2665 4.99223 28.7022 5.01699 28.139V14.7277C4.96454 12.792 5.03354 10.8549 5.22357 8.92777C5.31484 7.52815 5.88747 6.20319 6.84435 5.17769C7.86985 4.22081 9.19483 3.64816 10.5945 3.55689C12.5215 3.36687 14.4586 3.29787 16.3944 3.35032H19.6677C21.6035 3.29822 23.5405 3.36721 25.4676 3.55689C26.8657 3.65452 28.1887 4.22629 29.2177 5.17769ZM12.6602 22.0372H18.3489C18.6944 22.0372 19.0258 21.8999 19.2702 21.6555C19.5145 21.4112 19.6518 21.0797 19.6518 20.7342C19.6518 20.3886 19.5145 20.0572 19.2702 19.8128C19.0258 19.5685 18.6944 19.4312 18.3489 19.4312H12.6602C12.3146 19.4312 11.9832 19.5685 11.7388 19.8128C11.4944 20.0572 11.3572 20.3886 11.3572 20.7342C11.3572 21.0797 11.4944 21.4112 11.7388 21.6555C11.9832 21.8999 12.3146 22.0372 12.6602 22.0372ZM12.6602 15.5063H23.1159C23.4636 15.5063 23.797 15.3682 24.0429 15.1223C24.2887 14.8765 24.4268 14.543 24.4268 14.1954C24.4268 13.8477 24.2887 13.5142 24.0429 13.2684C23.797 13.0225 23.4636 12.8844 23.1159 12.8844H12.6602C12.3125 12.8844 11.979 13.0225 11.7332 13.2684C11.4873 13.5142 11.3492 13.8477 11.3492 14.1954C11.3492 14.543 11.4873 14.8765 11.7332 15.1223C11.979 15.3682 12.3125 15.5063 12.6602 15.5063Z"
              _ngcontent-sul-c185=""
            ></path>
            <path
              d="M30.0195 23.1963C26.7185 23.1963 24.0684 25.8464 24.0684 29.1474C24.0684 32.4484 26.7185 35.0985 30.0195 35.0985C33.3205 35.0985 35.9707 32.4484 35.9707 29.1474C35.9707 25.8929 33.3205 23.1963 30.0195 23.1963ZM32.8091 28.543L30.159 31.1931C29.9731 31.379 29.7406 31.472 29.5081 31.472C29.2757 31.472 29.0432 31.379 28.8572 31.1931L27.5089 29.8448C27.137 29.4728 27.137 28.9149 27.5089 28.5895C27.8809 28.2175 28.4388 28.2175 28.7642 28.5895L29.4616 29.2869L31.5073 27.2412C31.8793 26.8692 32.4372 26.8692 32.7626 27.2412C33.1811 27.6131 33.1811 28.2175 32.8091 28.543Z"
              fill="#44D3A7"
              _ngcontent-sul-c185=""
            ></path>
          </svg>
          <p>پرداخت شده</p>
          <p>26 صورتحساب</p>
        </div>
      </div>

      {/* *************** Transactions List *********************************      */}
      <div className="transaction-list-container">
        {filteredTransactions.map(({ id, title, cratedAt ,description, payAmount}) => (
          <span 
          onClick={()=>handelExpandCard(id)}
          className={ expandCard === id?"transition-opened-card" :"transaction-list-card"}  key={id}>
            <div style={{display:"flex",
                width:"100%",
               justifyContent:"space-between",
                alignItems:"center"}}>
            <p >{title}</p>
              <p>{`${payAmount} تومان`}</p>
            <p>{convertToShamsi(cratedAt)}</p>

            <KeyboardArrowLeft 
            style={{
              transform: expandCard === id ? 'rotate(-90deg)' : 'rotate(0deg)',
              transition: 'transform 0.3s ease',
            }} />
            </div>

{/* *************** Opened Card *************************************************** */}
            <div className={expandCard === id? "trasaction-opened-part": "transition-closed-part"}>
              <p>{description}</p>
            </div>

          </span>
        ))}
      </div>
    </section>
  );
};

export default TransactionsPage;
